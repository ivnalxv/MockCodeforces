{"remainingRequest":"C:\\Stuff\\ITMO 2.0\\Semester-03\\web\\HW-11\\frontend\\node_modules\\babel-loader\\lib\\index.js!C:\\Stuff\\ITMO 2.0\\Semester-03\\web\\HW-11\\frontend\\node_modules\\cache-loader\\dist\\cjs.js??ref--1-0!C:\\Stuff\\ITMO 2.0\\Semester-03\\web\\HW-11\\frontend\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Stuff\\ITMO 2.0\\Semester-03\\web\\HW-11\\frontend\\src\\App.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\Stuff\\ITMO 2.0\\Semester-03\\web\\HW-11\\frontend\\src\\App.vue","mtime":1640266531806},{"path":"C:\\Stuff\\ITMO 2.0\\Semester-03\\web\\HW-11\\frontend\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1640176458015},{"path":"C:\\Stuff\\ITMO 2.0\\Semester-03\\web\\HW-11\\frontend\\node_modules\\babel-loader\\lib\\index.js","mtime":1640176459799},{"path":"C:\\Stuff\\ITMO 2.0\\Semester-03\\web\\HW-11\\frontend\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1640176458015},{"path":"C:\\Stuff\\ITMO 2.0\\Semester-03\\web\\HW-11\\frontend\\node_modules\\vue-loader\\lib\\index.js","mtime":1640176459781}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMucmVnZXhwLmV4ZWMuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5zdHJpbmcubWF0Y2guanMiOwovLwovLwovLwovLwovLwovLwovLwovLwppbXBvcnQgSGVhZGVyIGZyb20gIi4vY29tcG9uZW50cy9IZWFkZXIiOwppbXBvcnQgTWlkZGxlIGZyb20gIi4vY29tcG9uZW50cy9NaWRkbGUiOwppbXBvcnQgRm9vdGVyIGZyb20gIi4vY29tcG9uZW50cy9Gb290ZXIiOwppbXBvcnQgYXhpb3MgZnJvbSAiYXhpb3MiOwoKZnVuY3Rpb24gdmFsaWRhdGVMZW5ndGgodG9rZW4sIG1pbkxlbmd0aCwgbWF4TGVuZ3RoLCB0b2tlbk5hbWUsIGVycm9yTmFtZSwgZW1pdGVyKSB7CiAgaWYgKCF0b2tlbiB8fCB0b2tlbi5sZW5ndGggPiBtYXhMZW5ndGggfHwgdG9rZW4ubGVuZ3RoIDwgbWluTGVuZ3RoKSB7CiAgICBlbWl0ZXIuJGVtaXQoZXJyb3JOYW1lLCB0b2tlbk5hbWUgKyAiIHNob3VsZCBiZSBiZXR3ZWVuICIgKyBtaW5MZW5ndGggKyAiIGFuZCAiICsgbWF4TGVuZ3RoICsgIiBzeW1ib2xzIGxvbmciKTsKICAgIHJldHVybiBmYWxzZTsKICB9CgogIHJldHVybiB0cnVlOwp9CgpmdW5jdGlvbiB2YWxpZGF0ZUxlbmd0aFJlZ2lzdGVyKHRva2VuLCBtaW5MZW5ndGgsIG1heExlbmd0aCwgdG9rZW5OYW1lLCBlbWl0ZXIpIHsKICByZXR1cm4gdmFsaWRhdGVMZW5ndGgodG9rZW4sIG1pbkxlbmd0aCwgbWF4TGVuZ3RoLCB0b2tlbk5hbWUsICJvblJlZ2lzdGVyVmFsaWRhdGlvbkVycm9yIiwgZW1pdGVyKTsKfQoKZnVuY3Rpb24gdmFsaWRhdGVSZWdpc3Rlcihsb2dpbiwgbmFtZSwgcGFzc3dvcmQsIGVtaXRlcikgewogIGlmICghdmFsaWRhdGVMZW5ndGhSZWdpc3Rlcihsb2dpbiwgMywgMTYsICJMb2dpbiIsIGVtaXRlcikpIHJldHVybiBmYWxzZTsKICBpZiAoIXZhbGlkYXRlTGVuZ3RoUmVnaXN0ZXIobmFtZSwgMywgMzIsICJOYW1lIiwgZW1pdGVyKSkgcmV0dXJuIGZhbHNlOwogIGlmICghdmFsaWRhdGVMZW5ndGhSZWdpc3RlcihwYXNzd29yZCwgOCwgMzIsICJQYXNzd29yZCIsIGVtaXRlcikpIHJldHVybiBmYWxzZTsKCiAgaWYgKCFsb2dpbi5tYXRjaCgvXlthLXpdKyQvKSkgewogICAgZW1pdGVyLiRlbWl0KCJvblJlZ2lzdGVyVmFsaWRhdGlvbkVycm9yIiwgIkxvZ2luIHNob3VsZCB1c2Ugb25seSBsb3dlcmNhc2UgbGF0aW4gbGV0dGVycyIpOwogICAgcmV0dXJuIGZhbHNlOwogIH0KCiAgcmV0dXJuIHRydWU7Cn0KCmV4cG9ydCBkZWZhdWx0IHsKICBuYW1lOiAnQXBwJywKICBjb21wb25lbnRzOiB7CiAgICBGb290ZXI6IEZvb3RlciwKICAgIE1pZGRsZTogTWlkZGxlLAogICAgSGVhZGVyOiBIZWFkZXIKICB9LAogIGRhdGE6IGZ1bmN0aW9uIGRhdGEoKSB7CiAgICByZXR1cm4gewogICAgICB1c2VyOiBudWxsLAogICAgICBwb3N0czogW10sCiAgICAgIHVzZXJzOiBbXSwKICAgICAgcG9zdHNDb21tZW50czogW10KICAgIH07CiAgfSwKICBiZWZvcmVNb3VudDogZnVuY3Rpb24gYmVmb3JlTW91bnQoKSB7CiAgICB2YXIgX3RoaXMgPSB0aGlzOwoKICAgIGlmIChsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgiand0IikgJiYgIXRoaXMudXNlcikgewogICAgICB0aGlzLiRyb290LiRlbWl0KCJvbkp3dCIsIGxvY2FsU3RvcmFnZS5nZXRJdGVtKCJqd3QiKSk7CiAgICB9CgogICAgYXhpb3MuZ2V0KCIvYXBpLzEvcG9zdHMiKS50aGVuKGZ1bmN0aW9uIChyZXNwb25zZSkgewogICAgICBfdGhpcy5wb3N0cyA9IHJlc3BvbnNlLmRhdGE7CiAgICB9KTsKICAgIGF4aW9zLmdldCgiL2FwaS8xL3VzZXJzIikudGhlbihmdW5jdGlvbiAocmVzcG9uc2UpIHsKICAgICAgX3RoaXMudXNlcnMgPSByZXNwb25zZS5kYXRhOwogICAgfSk7CiAgfSwKICBiZWZvcmVDcmVhdGU6IGZ1bmN0aW9uIGJlZm9yZUNyZWF0ZSgpIHsKICAgIHZhciBfdGhpczIgPSB0aGlzOwoKICAgIHRoaXMuJHJvb3QuJG9uKCJvbkVudGVyIiwgZnVuY3Rpb24gKGxvZ2luLCBwYXNzd29yZCkgewogICAgICBpZiAocGFzc3dvcmQgPT09ICIiKSB7CiAgICAgICAgX3RoaXMyLiRyb290LiRlbWl0KCJvbkVudGVyVmFsaWRhdGlvbkVycm9yIiwgIlBhc3N3b3JkIGlzIHJlcXVpcmVkIik7CgogICAgICAgIHJldHVybjsKICAgICAgfQoKICAgICAgYXhpb3MucG9zdCgiL2FwaS8xL2p3dCIsIHsKICAgICAgICBsb2dpbjogbG9naW4sCiAgICAgICAgcGFzc3dvcmQ6IHBhc3N3b3JkCiAgICAgIH0pLnRoZW4oZnVuY3Rpb24gKHJlc3BvbnNlKSB7CiAgICAgICAgbG9jYWxTdG9yYWdlLnNldEl0ZW0oImp3dCIsIHJlc3BvbnNlLmRhdGEpOwoKICAgICAgICBfdGhpczIuJHJvb3QuJGVtaXQoIm9uSnd0IiwgcmVzcG9uc2UuZGF0YSk7CiAgICAgIH0pLmNhdGNoKGZ1bmN0aW9uIChlcnJvcikgewogICAgICAgIF90aGlzMi4kcm9vdC4kZW1pdCgib25FbnRlclZhbGlkYXRpb25FcnJvciIsIGVycm9yLnJlc3BvbnNlLmRhdGEpOwogICAgICB9KTsKICAgIH0pOwogICAgdGhpcy4kcm9vdC4kb24oIm9uUmVnaXN0ZXIiLCBmdW5jdGlvbiAobG9naW4sIG5hbWUsIHBhc3N3b3JkKSB7CiAgICAgIGlmICh2YWxpZGF0ZVJlZ2lzdGVyKGxvZ2luLCBuYW1lLCBwYXNzd29yZCwgX3RoaXMyLiRyb290KSkgewogICAgICAgIGF4aW9zLnBvc3QoIi9hcGkvMS91c2VycyIsIHsKICAgICAgICAgIGxvZ2luOiBsb2dpbiwKICAgICAgICAgIG5hbWU6IG5hbWUsCiAgICAgICAgICBwYXNzd29yZDogcGFzc3dvcmQKICAgICAgICB9KS50aGVuKGZ1bmN0aW9uIChyZXNwb25zZSkgewogICAgICAgICAgbG9jYWxTdG9yYWdlLnNldEl0ZW0oImp3dCIsIHJlc3BvbnNlLmRhdGEpOwoKICAgICAgICAgIF90aGlzMi4kcm9vdC4kZW1pdCgib25Kd3QiLCByZXNwb25zZS5kYXRhKTsKICAgICAgICB9KS5jYXRjaChmdW5jdGlvbiAoZXJyb3IpIHsKICAgICAgICAgIF90aGlzMi4kcm9vdC4kZW1pdCgib25SZWdpc3RlclZhbGlkYXRpb25FcnJvciIsIGVycm9yLnJlc3BvbnNlLmRhdGEpOwogICAgICAgIH0pOwogICAgICB9CiAgICB9KTsKICAgIHRoaXMuJHJvb3QuJG9uKCJvbkp3dCIsIGZ1bmN0aW9uIChqd3QpIHsKICAgICAgbG9jYWxTdG9yYWdlLnNldEl0ZW0oImp3dCIsIGp3dCk7CiAgICAgIGF4aW9zLmdldCgiL2FwaS8xL3VzZXJzL2F1dGgiLCB7CiAgICAgICAgcGFyYW1zOiB7CiAgICAgICAgICBqd3Q6IGp3dAogICAgICAgIH0KICAgICAgfSkudGhlbihmdW5jdGlvbiAocmVzcG9uc2UpIHsKICAgICAgICBfdGhpczIudXNlciA9IHJlc3BvbnNlLmRhdGE7CgogICAgICAgIF90aGlzMi4kcm9vdC4kZW1pdCgib25DaGFuZ2VQYWdlIiwgIkluZGV4Iik7CiAgICAgIH0pLmNhdGNoKGZ1bmN0aW9uICgpIHsKICAgICAgICByZXR1cm4gX3RoaXMyLiRyb290LiRlbWl0KCJvbkxvZ291dCIpOwogICAgICB9KTsKICAgIH0pOwogICAgdGhpcy4kcm9vdC4kb24oIm9uTG9nb3V0IiwgZnVuY3Rpb24gKCkgewogICAgICBsb2NhbFN0b3JhZ2UucmVtb3ZlSXRlbSgiand0Iik7CiAgICAgIF90aGlzMi51c2VyID0gbnVsbDsKICAgIH0pOwogIH0KfTs="},{"version":3,"sources":["App.vue"],"names":[],"mappings":"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","sourcesContent":["<template>\n    <div id=\"app\">\n        <Header :user=\"user\"/>\n        <Middle :posts=\"posts\" :users=\"users\" :postsComments=\"postsComments\"/>\n        <Footer/>\n    </div>\n</template>\n\n<script>\nimport Header from \"./components/Header\";\nimport Middle from \"./components/Middle\";\nimport Footer from \"./components/Footer\";\nimport axios from \"axios\"\n\n\nfunction validateLength(token, minLength, maxLength, tokenName, errorName, emiter) {\n    if (!token || token.length > maxLength || token.length < minLength) {\n        emiter.$emit(errorName, tokenName + \" should be between \" + minLength + \" and \" + maxLength + \" symbols long\");\n        return false;\n    }\n    return true;\n}\n\nfunction validateLengthRegister(token, minLength, maxLength, tokenName, emiter) {\n    return validateLength(token, minLength, maxLength, tokenName, \"onRegisterValidationError\", emiter);\n}\n\nfunction validateRegister(login, name, password, emiter) {\n    if (!validateLengthRegister(login, 3, 16, \"Login\", emiter)) return false;\n    if (!validateLengthRegister(name, 3, 32, \"Name\", emiter)) return false;\n    if (!validateLengthRegister(password, 8, 32, \"Password\", emiter)) return false;\n    if (!login.match(/^[a-z]+$/)) {\n        emiter.$emit(\"onRegisterValidationError\", \"Login should use only lowercase latin letters\");\n        return false;\n    }\n    return true;\n}\n\nexport default {\n    name: 'App',\n    components: {\n        Footer,\n        Middle,\n        Header\n    },\n    data: function () {\n        return {\n            user: null,\n            posts: [],\n            users: [],\n            postsComments: []\n        }\n    },\n    beforeMount() {\n        if (localStorage.getItem(\"jwt\") && !this.user) {\n            this.$root.$emit(\"onJwt\", localStorage.getItem(\"jwt\"));\n        }\n\n        axios.get(\"/api/1/posts\").then(response => {\n            this.posts = response.data;\n        });\n\n        axios.get(\"/api/1/users\").then(response => {\n            this.users = response.data;\n        });\n    },\n    beforeCreate() {\n        this.$root.$on(\"onEnter\", (login, password) => {\n            if (password === \"\") {\n                this.$root.$emit(\"onEnterValidationError\", \"Password is required\");\n                return;\n            }\n\n            axios.post(\"/api/1/jwt\", {\n                    login, password\n            }).then(response => {\n                localStorage.setItem(\"jwt\", response.data);\n                this.$root.$emit(\"onJwt\", response.data);\n            }).catch(error => {\n                this.$root.$emit(\"onEnterValidationError\", error.response.data);\n            });\n        });\n\n        this.$root.$on(\"onRegister\", (login, name, password) => {\n            if (validateRegister(login, name, password, this.$root)) {\n                axios.post(\"/api/1/users\", {\n                    login, name, password\n                }).then(response => {\n                    localStorage.setItem(\"jwt\", response.data);\n                    this.$root.$emit(\"onJwt\", response.data);\n                }).catch(error => {\n                    this.$root.$emit(\"onRegisterValidationError\", error.response.data);\n                });\n            }\n        });\n\n        this.$root.$on(\"onJwt\", (jwt) => {\n            localStorage.setItem(\"jwt\", jwt);\n\n            axios.get(\"/api/1/users/auth\", {\n                params: {\n                    jwt\n                }\n            }).then(response => {\n                this.user = response.data;\n                this.$root.$emit(\"onChangePage\", \"Index\");\n            }).catch(() => this.$root.$emit(\"onLogout\"))\n        });\n\n        this.$root.$on(\"onLogout\", () => {\n            localStorage.removeItem(\"jwt\");\n            this.user = null;\n        });\n\n    }\n}\n</script>\n\n<style>\n#app {\n\n}\n</style>\n"],"sourceRoot":"src"}]}